{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Review Packet Index HTML Schema",
  "description": "Contract for review-artifacts/index.html - Main entry point for mentor review",
  "type": "object",
  "properties": {
    "html": {
      "type": "string",
      "description": "Complete HTML document as string"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "const": "Week 5 Review Packet",
          "description": "Page title"
        },
        "generatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO8601 timestamp when artifact was generated"
        },
        "branch": {
          "type": "string",
          "const": "development",
          "description": "Git branch where workflow runs"
        }
      },
      "required": ["title", "generatedAt", "branch"]
    },
    "sections": {
      "type": "array",
      "minItems": 4,
      "maxItems": 4,
      "description": "Four required artifact sections",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "enum": ["Coverage Table", "OpenAPI Documentation", "Playwright Test Report", "CHANGELOG Summary"],
            "description": "Artifact section name"
          },
          "url": {
            "type": "string",
            "description": "Relative path or link to artifact (e.g., './coverage-hello/lcov-report/index.html')"
          },
          "description": {
            "type": "string",
            "description": "Human-readable description of the artifact"
          },
          "isAccessible": {
            "type": "boolean",
            "description": "Whether link exists and is valid"
          }
        },
        "required": ["name", "url", "description", "isAccessible"]
      }
    },
    "validation": {
      "type": "object",
      "properties": {
        "allLinksAccessible": {
          "type": "boolean",
          "description": "All four artifact links must be accessible"
        },
        "coveragePercentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall API coverage percentage (must be ≥70)"
        },
        "openApiValid": {
          "type": "boolean",
          "description": "OpenAPI HTML renders without errors"
        },
        "playwrightReportValid": {
          "type": "boolean",
          "description": "Playwright report link is valid (if applicable)"
        },
        "changelogHasWeek5": {
          "type": "boolean",
          "description": "CHANGELOG.md contains Week 5 section"
        }
      },
      "required": ["allLinksAccessible", "coveragePercentage", "openApiValid", "changelogHasWeek5"]
    }
  },
  "required": ["metadata", "sections", "validation"],
  "examples": [
    {
      "metadata": {
        "title": "Week 5 Review Packet",
        "generatedAt": "2025-11-12T18:45:00Z",
        "branch": "development"
      },
      "sections": [
        {
          "name": "Coverage Table",
          "url": "./index.html (links to coverage-*/lcov-report/index.html)",
          "description": "API test coverage for all modules (target ≥70%)",
          "isAccessible": true
        },
        {
          "name": "OpenAPI Documentation",
          "url": "./openapi.html",
          "description": "Interactive API specification (generated by Redoc)",
          "isAccessible": true
        },
        {
          "name": "Playwright Test Report",
          "url": "./playwright-report/index.html",
          "description": "Automated smoke test results",
          "isAccessible": false
        },
        {
          "name": "CHANGELOG Summary",
          "url": "../../CHANGELOG.md",
          "description": "Week 5 feature summary",
          "isAccessible": true
        }
      ],
      "validation": {
        "allLinksAccessible": true,
        "coveragePercentage": 72.5,
        "openApiValid": true,
        "playwrightReportValid": false,
        "changelogHasWeek5": true
      }
    }
  ]
}
